
<!DOCTYPE html>
<html>
<head>
    <link href="/images/favicon.ico" rel="icon" type="/image/x-icon" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="github.css">
</head>

<div class="navi"><div class="image-container"><a href="https://sberm.cn" class="link-wrapper"><img src="/images/leave.png" class="leave-img"/></a></div></div>
<div class = "spacing-div">
<article class="markdown-body">
<div class="highlight highlight-source-shell"><pre>error[E0277]: the <span class="pl-s"><span class="pl-pds">`</span><span class="pl-k">?</span><span class="pl-pds">`</span></span> operator can only be used on <span class="pl-s"><span class="pl-pds">`</span>Result<span class="pl-pds">`</span></span>s, not <span class="pl-s"><span class="pl-pds">`</span>Option<span class="pl-pds">`</span></span>s, <span class="pl-k">in</span> a <span class="pl-k">function</span> <span class="pl-en">that</span> returns <span class="pl-s"><span class="pl-pds">`</span>Result<span class="pl-pds">`</span></span>
  --<span class="pl-k">&gt;</span> src/main.rs:11:59
   <span class="pl-k">|</span>
5  <span class="pl-k">|</span> fn display_dir(dir: <span class="pl-k">&amp;</span>Path) -<span class="pl-k">&gt;</span> <span class="pl-en">io::Result&lt;</span>()<span class="pl-k">&gt;</span>{
   <span class="pl-k">|</span> -------------------------------------------- this <span class="pl-k">function</span> <span class="pl-en">returns</span> a <span class="pl-s"><span class="pl-pds">`</span>Result<span class="pl-pds">`</span></span>
...
11 <span class="pl-k">|</span>         <span class="pl-c1">let</span> path_str  = <span class="pl-en">path.file_name().unwrap().to_str</span>()<span class="pl-k">?</span>;
   <span class="pl-k">|</span>                                                           ^ use <span class="pl-s"><span class="pl-pds">`</span>.ok_or(...)<span class="pl-k">?</span><span class="pl-pds">`</span></span> to provide an error compatible with <span class="pl-en">`Result&lt;</span>(), std::io::Error<span class="pl-k">&gt;</span><span class="pl-s"><span class="pl-pds">`</span></span>
<span class="pl-s">   <span class="pl-k">|</span></span>
<span class="pl-s">   = help: the trait <span class="pl-pds">`</span></span>FromResidual<span class="pl-k">&lt;</span>Option<span class="pl-k">&lt;</span>Infallible<span class="pl-k">&gt;&gt;</span><span class="pl-s"><span class="pl-pds">`</span> is not implemented <span class="pl-k">for</span> <span class="pl-pds">`</span></span>Result<span class="pl-s"><span class="pl-pds">&lt;(</span><span class="pl-pds">)</span></span>, std::io::Error<span class="pl-k">&gt;</span><span class="pl-s"><span class="pl-pds">`</span></span>
<span class="pl-s">   = help: the following other types implement trait <span class="pl-pds">`</span></span>FromResidual<span class="pl-k">&lt;</span>R<span class="pl-k">&gt;</span><span class="pl-s"><span class="pl-pds">`</span>:</span>
<span class="pl-s">             <span class="pl-k">&lt;</span>Result<span class="pl-k">&lt;</span>T, F<span class="pl-k">&gt;</span> as FromResidual<span class="pl-k">&lt;</span>Yeet<span class="pl-k">&lt;</span>E&gt;&gt;&gt;</span>
<span class="pl-s">             <span class="pl-k">&lt;</span>Result<span class="pl-k">&lt;</span>T, F<span class="pl-k">&gt;</span> as FromResidual<span class="pl-k">&lt;</span>Result<span class="pl-k">&lt;</span>Infallible, E&gt;&gt;&gt;</span>
<span class="pl-s"></span>
<span class="pl-s">For more information about this error, try <span class="pl-pds">`</span></span>rustc --explain E0277<span class="pl-s"><span class="pl-pds">`</span>.</span></pre></div>
<p>解决:</p>
<div class="highlight highlight-source-rust"><pre>path<span class="pl-kos">.</span><span class="pl-en">file_name</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unwrap</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">to_str</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">.</span><span class="pl-en">unwrap</span><span class="pl-kos">(</span><span class="pl-kos">)</span><span class="pl-kos">;</span></pre></div>
<p>error handling 问题，?抛出错误，但Option和Result不共用，放弃error处理，直接unwrap()取字符串</p>

</article>

<div id="footer-main">
    <div id="footer-line">
    </div>
    <div id="footer-text-wrapper">
        <p id="footer-text">
            The steadfast love of the Lord never ceases; his mercies never come to an end; they are new every morning; great is your faithfulness.
        </p>
    </div>
    <div id="footer-commu-background">
        <div id="footer-commu">
            <div class="footer-image-container">
                <a href="https://www.youtube.com/watch?v=XqZsoesa55w">
                    <img class="footer-image" src="../images/linux.png"/>
                </a>
            </div>
            <div class="footer-image-container">
                <a href="https://twitter.com/Fernand73827208">
                    <img class="footer-image" src="../images/twitter.png"/>
                </a>
            </div>
            <div class="footer-image-container">
                <a href="https://github.com/torvalds">
                    <img class="footer-image" src="../images/github.svg"/>
                </a>
            </div>
        </div>
    </div>
</div>
<div>
</div>
</div>
</html>
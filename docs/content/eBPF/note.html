
<!DOCTYPE html>
<html>
<head>
    <link href="/images/favicon.ico" rel="icon" type="/image/x-icon" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/docs/github.css">
</head>
<div class = "spacing-div">
<article class="markdown-body">
<h2 id="user-content-文档"><a class="heading-link" href="#文档">文档<span aria-hidden="true" class="octicon octicon-link"></span></a></h2>
<h4 id="user-content-reference-guide"><a class="heading-link" href="#reference-guide">reference guide<span aria-hidden="true" class="octicon octicon-link"></span></a></h4>
<p><a href="https://github.com/iovisor/bcc/blob/master/docs/reference_guide.md">https://github.com/iovisor/bcc/blob/master/docs/reference_guide.md</a></p>
<h4 id="user-content-bpf-docs"><a class="heading-link" href="#bpf-docs">bpf-docs<span aria-hidden="true" class="octicon octicon-link"></span></a></h4>
<p><a href="https://github.com/iovisor/bpf-docs/blob/master/bpf_helpers.rst/">https://github.com/iovisor/bpf-docs/blob/master/bpf_helpers.rst/</a></p>
<h4 id="user-content-undocumented-的函数也有很多"><a class="heading-link" href="#undocumented-的函数也有很多">undocumented 的函数也有很多<span aria-hidden="true" class="octicon octicon-link"></span></a></h4>
<p>比如 open_perf_event</p>
<p>python的包是用egg装的(<code>/usr/lib/python3.9/site-packages/bcc-0.28.0+b8b943a1-py3.9.egg/bcc/</code>)，代码在 <code>/root/hw/bcc/src/python/bcc</code></p>
<p>bcc竟然是c++的api(被骗了)。路径: <code>/usr/include/bcc</code></p>
<p>2023-11-2</p>
<p>FUCK BCC!!!
我用libbpf-CORE</p>
<p>gcc include path:</p>
<pre><code>#include &lt;...&gt; search starts here:
 /usr/lib/gcc/x86_64-redhat-linux/8/include
 /usr/local/include
 /usr/include
</code></pre>
<p>gcc link path:</p>
<pre><code>SEARCH_DIR("=/usr/x86_64-redhat-linux/lib64")
SEARCH_DIR("=/usr/lib64")
SEARCH_DIR("=/usr/local/lib64")
SEARCH_DIR("=/lib64")
SEARCH_DIR("=/usr/x86_64-redhat-linux/lib")
SEARCH_DIR("=/usr/local/lib")
SEARCH_DIR("=/lib")
SEARCH_DIR("=/usr/lib")
</code></pre>
<p>how to find out gcc include path:</p>
<pre><code>In order to figure out the default paths used by gcc/g++, as well as their priorities, you need to examine the output of the following commands:

For C:
echo | gcc -xc -E -v -
echo | gcc -x c -E -Wp,-v - &gt;/dev/null
For C++:
echo | gcc -xc++ -E -v -
</code></pre>
<p>find out link path:</p>
<pre><code>ld --verbose | grep SEARCH_DIR | tr -s ' ;' \\012
</code></pre>
<p>bcc 安装位置</p>
<pre><code>/ &gt; find ./ -regex ".*libbcc.*" | grep lib64
./usr/lib64/libbcc_bpf.so.0.19.0
./usr/lib64/libbcc.so.0.19.0
./usr/lib64/pkgconfig/libbcc.pc
./usr/lib64/libbcc.so.0
./usr/lib64/libbcc.so
./usr/lib64/libbcc.a
./usr/lib64/libbcc-loader-static.a
./usr/lib64/libbcc_bpf.a
./usr/lib64/libbcc_bpf.so.0.28.0
./usr/lib64/libbcc_bpf.so.0
./usr/lib64/libbcc_bpf.so
./usr/lib64/libbcc.so.0.28.0
</code></pre>
<p>卸载: make uninstall</p>
<p>/<em>-</em>- mode:c;indent-tabs-mode:nil;c-basic-offset:2;tab-width:8;coding:utf-8 -<em>-│
│vi: set net ft=c ts=2 sts=2 sw=2 fenc=utf-8                                :vi│
╞══════════════════════════════════════════════════════════════════════════════╡
│ Copyright 2021 Justine Alexandra Roberts Tunney                              │
│                                                                              │
│ Permission to use, copy, modify, and/or distribute this software for         │
│ any purpose with or without fee is hereby granted, provided that the         │
│ above copyright notice and this permission notice appear in all copies.      │
│                                                                              │
│ THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL                │
│ WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED                │
│ WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE             │
│ AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL         │
│ DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR        │
│ PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER               │
│ TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR             │
│ PERFORMANCE OF THIS SOFTWARE.                                                │
╚─────────────────────────────────────────────────────────────────────────────</em>/</p>
<h4 id="user-content-share-vs-static"><a class="heading-link" href="#share-vs-static">share vs static<span aria-hidden="true" class="octicon octicon-link"></span></a></h4>
<p>share(.so) static(.a)</p>
<h4 id="user-content-很显然你可以直接使用-o指定-c生成的object-file的名称即helloworldc不一定要生成helloworldo"><a class="heading-link" href="#很显然你可以直接使用-o指定-c生成的object-file的名称即helloworldc不一定要生成helloworldo">很显然你可以直接使用-o指定-c生成的object file的名称(即helloworld.c不一定要生成helloworld.o)<span aria-hidden="true" class="octicon octicon-link"></span></a></h4>
<p>gcc -c helloworld.c -o helloworld2.o</p>

</article>
<div>
</div>
</div>
</html>